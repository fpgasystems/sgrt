---

#directories ----------------------------------------------------------------------------------------

- name: create top directory
  file:
    path: /opt/cli
    state: directory

- name: create common directory
  file:
    path: /opt/cli/common
    state: directory

- name: create validate directory
  file:
    path: /opt/cli/validate
    state: directory

- name: create get directory
  file:
    path: /opt/cli/get
    state: directory

- name: create program directory
  file:
    path: /opt/cli/program
    state: directory

- name: create new directory
  file:
    path: /opt/cli/new
    state: directory

- name: create run directory
  file:
    path: /opt/cli/run
    state: directory

- name: create build directory
  file:
    path: /opt/cli/build
    state: directory

- name: create set directory
  file:
    path: /opt/cli/set
    state: directory

- name: create constants directory
  file:
    path: /opt/cli/constants
    state: directory

- name: create enable directory
  file:
    path: /opt/cli/enable
    state: directory

#sg
#- name: copy sg
#  copy:
#    src: "../../cli/sg.sh"
#    dest: /opt/cli/sg
#    mode: 0755
- name: remove sg
  ansible.builtin.file:
    path: /opt/cli/sg
    state: absent

#sg
- name: copy sgutil
  copy:
    src: "../../cli/sgutil.sh"
    dest: /opt/cli/sgutil
    mode: 0755

- name: copy sgutil_completion to /usr/share/bash-completion/completions
  copy:
    src: "../../cli/sgutil_completion.sh"
    dest: /usr/share/bash-completion/completions/sgutil
    mode: 0755

#version
- name: copy version
  copy:
    src: "../../cli/VERSION"
    dest: /opt/cli/VERSION
    mode: 0644

# templates
- name: Check on templates folder
  stat:
    path: "/opt/cli/templates" #[path to the file or directory you want to check]
  register: templates_folder

- name: Copy templates
  copy:
    src: "../../cli/templates"
    dest: /opt/cli/
    mode: 0755
  when: templates_folder.stat.exists == False

- name: remove template.hpp
  ansible.builtin.file:
    path: /opt/cli/templates/vitis/hello_world/configs/template.hpp
    state: absent

- name: remove Vitis common
  ansible.builtin.file:
    path: /opt/cli/templates/vitis/common
    state: absent

- name: remove Vitis hello_world (opencl) template 
  ansible.builtin.file:
    path: /opt/cli/templates/vitis/hello_world
    state: absent

- name: remove HIP vadd.cpp
  ansible.builtin.file:
    path: /opt/cli/templates/hip/hello_world/src/vadd.cpp
    state: absent

- name: remove HIP host_kernels.hpp
  ansible.builtin.file:
    path: /opt/cli/templates/hip/hello_world/src/host_kernels.hpp
    state: absent

- name: remove HIP host_kernels folder
  ansible.builtin.file:
    path: /opt/cli/templates/hip/hello_world/src/host_kernels
    state: absent

#build ----------------------------------------------------------------------------------------

- name: copy (build) coyote script
  copy:
    src: "../../cli/build/coyote.sh"
    dest: /opt/cli/build/coyote
    mode: 0755

- name: copy (build) vitis script
  copy:
    src: "../../cli/build/vitis.sh"
    dest: /opt/cli/build/vitis
    mode: 0755

- name: copy (build) mpi script
  copy:
    src: "../../cli/build/mpi.sh"
    dest: /opt/cli/build/mpi
    mode: 0755

- name: copy build/hip script
  copy:
    src: "../../cli/build/hip.sh"
    dest: /opt/cli/build/hip
    mode: 0755

#common --------------------------------------------------------------------------------------

- name: copy ssh_key_add script
  copy:
    src: "../../cli/common/ssh_key_add.sh"
    dest: /opt/cli/common/ssh_key_add
    mode: 0755

- name: copy get_booking_system_host script
  copy:
    src: "../../cli/common/get_booking_system_host.sh"
    dest: /opt/cli/common/get_booking_system_host
    mode: 0755

- name: copy get_booking_system_db_user script
  copy:
    src: "../../cli/common/get_booking_system_db_user.sh"
    dest: /opt/cli/common/get_booking_system_db_user
    mode: 0755

- name: copy get_booking_system_db_passwd script
  copy:
    src: "../../cli/common/get_booking_system_db_passwd.sh"
    dest: /opt/cli/common/get_booking_system_db_passwd
    mode: 0755

- name: copy get_booking_system_servers_list script
  copy:
    src: "../../cli/common/get_booking_system_servers_list.sh"
    dest: /opt/cli/common/get_booking_system_servers_list
    mode: 0755

#- name: copy cli_completion script
#  copy:
#    src: "../../cli/common/cli_completion.sh"
#    dest: /opt/cli/common/cli_completion
#    mode: 0755
- name: remove cli_completion
  ansible.builtin.file:
    path: /opt/cli/common/cli_completion
    state: absent

#- name: copy hot_plug_boot script
#  copy:
#    src: "../../cli/common/hot_plug_boot.sh"
#    dest: /opt/cli/common/hot_plug_boot
#    mode: 0755
- name: remove /opt/cli/common/hot_plug_boot # moved to program/pci_hot_plug
  ansible.builtin.file:
    path: /opt/cli/common/hot_plug_boot
    state: absent    

#- name: run cli_completion at login #this is not working but neither to run the command on welcome_msg...
#  copy:
#    dest: /etc/profile.d/cli_completion.sh
#    content: eval "$(source /opt/cli/common/cli_completion)"

- name: copy common/is_member script
  copy:
    src: "../../cli/common/is_member.sh"
    dest: /opt/cli/common/is_member
    mode: 0755

- name: copy common/is_virtualized script
  copy:
    src: "../../cli/common/is_virtualized.sh"
    dest: /opt/cli/common/is_virtualized
    mode: 0755

- name: copy common/get_email script
  copy:
    src: "../../cli/common/get_email.sh"
    dest: /opt/cli/common/get_email
    mode: 0755

#- name: copy get/get_device_ip script
#  copy:
#    src: "../../cli/get/get_device_ip.sh"
#    dest: /opt/cli/get/get_device_ip
#    mode: 0755
- name: remove get/get_device_ip
  ansible.builtin.file:
    path: /opt/cli/get/get_device_ip
    state: absent
#- name: remove common/get_device_ip
#  ansible.builtin.file:
#    path: /opt/cli/common/get_device_ip
#    state: absent

#- name: copy common/get_MAX_DEVICES script
#  copy:
#    src: "../../cli/common/get_MAX_DEVICES.sh"
#    dest: /opt/cli/common/get_MAX_DEVICES
#    mode: 0755
- name: remove common/get_MAX_DEVICES
  ansible.builtin.file:
    path: /opt/cli/common/get_MAX_DEVICES
    state: absent

- name: copy common/bitstream_dialog_check script
  copy:
    src: "../../cli/common/bitstream_dialog_check.sh"
    dest: /opt/cli/common/bitstream_dialog_check
    mode: 0755

- name: copy common/driver_dialog_check script
  copy:
    src: "../../cli/common/driver_dialog_check.sh"
    dest: /opt/cli/common/driver_dialog_check
    mode: 0755

- name: copy common/target_dialog script
  copy:
    src: "../../cli/common/target_dialog.sh"
    dest: /opt/cli/common/target_dialog
    mode: 0755

- name: copy common/target_dialog_check script
  copy:
    src: "../../cli/common/target_dialog_check.sh"
    dest: /opt/cli/common/target_dialog_check
    mode: 0755

- name: copy common/is_acap script
  copy:
    src: "../../cli/common/is_acap.sh"
    dest: /opt/cli/common/is_acap
    mode: 0755

- name: copy common/is_cpu script
  copy:
    src: "../../cli/common/is_cpu.sh"
    dest: /opt/cli/common/is_cpu
    mode: 0755

- name: copy common/is_fpga script
  copy:
    src: "../../cli/common/is_fpga.sh"
    dest: /opt/cli/common/is_fpga
    mode: 0755

- name: copy common/is_gpu script
  copy:
    src: "../../cli/common/is_gpu.sh"
    dest: /opt/cli/common/is_gpu
    mode: 0755

- name: copy common/get_server_type script
  copy:
    src: "../../cli/common/get_server_type.sh"
    dest: /opt/cli/common/get_server_type
    mode: 0755

#- name: copy common/get_path script
#  copy:
#    src: "../../cli/common/get_path.sh"
#    dest: /opt/cli/common/get_path
#    mode: 0755
- name: remove common/get_path
  ansible.builtin.file:
    path: /opt/cli/common/get_path
    state: absent

- name: copy common/get_constant script
  copy:
    src: "../../cli/common/get_constant.sh"
    dest: /opt/cli/common/get_constant
    mode: 0755

- name: copy common/get_files script
  copy:
    src: "../../cli/common/get_files.sh"
    dest: /opt/cli/common/get_files
    mode: 0755

#constants -----------------------------------------------------------------------------------

- name: copy ACAP_SERVERS_LIST
  copy:
    src: "../../cli/constants/ACAP_SERVERS_LIST"
    dest: /opt/cli/constants/ACAP_SERVERS_LIST
    mode: 0644

- name: copy CPU_SERVERS_LIST
  copy:
    src: "../../cli/constants/CPU_SERVERS_LIST"
    dest: /opt/cli/constants/CPU_SERVERS_LIST
    mode: 0644

- name: copy FPGA_SERVERS_LIST
  copy:
    src: "../../cli/constants/FPGA_SERVERS_LIST"
    dest: /opt/cli/constants/FPGA_SERVERS_LIST
    mode: 0644

- name: copy GPU_SERVERS_LIST
  copy:
    src: "../../cli/constants/GPU_SERVERS_LIST"
    dest: /opt/cli/constants/GPU_SERVERS_LIST
    mode: 0644

- name: copy VIRTUALIZED_SERVERS_LIST
  copy:
    src: "../../cli/constants/VIRTUALIZED_SERVERS_LIST"
    dest: /opt/cli/constants/VIRTUALIZED_SERVERS_LIST
    mode: 0644

- name: copy VIVADO_DEVICES_MAX
  copy:
    src: "../../cli/constants/VIVADO_DEVICES_MAX"
    dest: /opt/cli/constants/VIVADO_DEVICES_MAX
    mode: 0644

- name: copy MY_PROJECTS_PATH
  copy:
    src: "../../cli/constants/MY_PROJECTS_PATH"
    dest: /opt/cli/constants/MY_PROJECTS_PATH
    mode: 0644

#- name: copy CLI_PATH
#  copy:
#    src: "../../cli/constants/CLI_PATH"
#    dest: /opt/cli/constants/CLI_PATH
#    mode: 0644

- name: copy HACC_PATH
  copy:
    src: "../../cli/constants/HACC_PATH"
    dest: /opt/cli/constants/HACC_PATH
    mode: 0644

- name: copy ROCM_PATH
  copy:
    src: "../../cli/constants/ROCM_PATH"
    dest: /opt/cli/constants/ROCM_PATH
    mode: 0644

#- name: copy VITIS_PATH
#  copy:
#    src: "../../cli/constants/VITIS_PATH"
#    dest: /opt/cli/constants/VITIS_PATH
#    mode: 0644
- name: remove VITIS_PATH
  ansible.builtin.file:
    path: /opt/cli/constants/VITIS_PATH
    state: absent

#- name: copy VIVADO_PATH
#  copy:
#    src: "../../cli/constants/VIVADO_PATH"
#    dest: /opt/cli/constants/VIVADO_PATH
#    mode: 0644
- name: remove VIVADO_PATH
  ansible.builtin.file:
    path: /opt/cli/constants/VIVADO_PATH
    state: absent

- name: copy XILINX_TOOLS_PATH
  copy:
    src: "../../cli/constants/XILINX_TOOLS_PATH"
    dest: /opt/cli/constants/XILINX_TOOLS_PATH
    mode: 0644

- name: copy XILINX_PLATFORMS_PATH
  copy:
    src: "../../cli/constants/XILINX_PLATFORMS_PATH"
    dest: /opt/cli/constants/XILINX_PLATFORMS_PATH
    mode: 0644

- name: copy XRT_PATH
  copy:
    src: "../../cli/constants/XRT_PATH"
    dest: /opt/cli/constants/XRT_PATH
    mode: 0644

- name: copy MPICH_PATH
  copy:
    src: "../../cli/constants/MPICH_PATH"
    dest: /opt/cli/constants/MPICH_PATH
    mode: 0644
    
- name: copy LOCAL_PATH
  copy:
    src: "../../cli/constants/LOCAL_PATH"
    dest: /opt/cli/constants/LOCAL_PATH
    mode: 0644

#enable
- name: copy enable/vitis script
  copy:
    src: "../../cli/enable/vitis.sh"
    dest: /opt/cli/enable/vitis
    mode: 0755
- name: copy enable/vivado script
  copy:
    src: "../../cli/enable/vivado.sh"
    dest: /opt/cli/enable/vivado
    mode: 0755
- name: copy enable/xrt script
  copy:
    src: "../../cli/enable/xrt.sh"
    dest: /opt/cli/enable/xrt
    mode: 0755

#examine -------------------------------------------------------------------------------------

- name: copy examine
  copy:
    src: "../../cli/examine.sh"
    dest: /opt/cli/examine
    mode: 0755

#- name: create /opt/hacc directory for devices
#  file:
#    path: /opt/hacc
#    state: directory
- name: Delete the /opt/hacc folder
  file:
    path: /opt/hacc
    state: absent

- name: check on /opt/cli/devices_acap_fpga 
  stat:
    path: /opt/cli/devices_acap_fpga
  register: get_devices_stat

#- name: copy devices template to /opt/cli
#  copy:
#    src: "../../cli/devices"
#    dest: /opt/cli/devices
#    mode: 0755
#  when: not get_devices_stat.stat.exists

- name: copy devices_acap_fpga template to /opt/cli
  copy:
    src: "../../cli/devices_acap_fpga"
    dest: /opt/cli/devices_acap_fpga
    mode: 0755
  when: not get_devices_stat.stat.exists

- name: copy devices_gpu template to /opt/cli
  copy:
    src: "../../cli/devices_gpu"
    dest: /opt/cli/devices_gpu
    mode: 0755
  when: not get_devices_stat.stat.exists

#- name: copy common/get_num_devices script
#  copy:
#    src: "../../cli/common/get_num_devices.sh"
#    dest: /opt/cli/common/get_num_devices
#    mode: 0755
- name: remove common/get_num_devices
  ansible.builtin.file:
    path: /opt/cli/common/get_num_devices
    state: absent

- name: copy common/get_multiple_devices script
  copy:
    src: "../../cli/common/get_multiple_devices.sh"
    dest: /opt/cli/common/get_multiple_devices
    mode: 0755

- name: copy common/project_dialog script
  copy:
    src: "../../cli/common/project_dialog.sh"
    dest: /opt/cli/common/project_dialog
    mode: 0755

- name: copy common/project_dialog_check script
  copy:
    src: "../../cli/common/project_dialog_check.sh"
    dest: /opt/cli/common/project_dialog_check
    mode: 0755

- name: copy common/device_dialog script
  copy:
    src: "../../cli/common/device_dialog.sh"
    dest: /opt/cli/common/device_dialog
    mode: 0755

- name: copy common/device_dialog_gpu script
  copy:
    src: "../../cli/common/device_dialog_gpu.sh"
    dest: /opt/cli/common/device_dialog_gpu
    mode: 0755

- name: copy common/device_dialog_check script
  copy:
    src: "../../cli/common/device_dialog_check.sh"
    dest: /opt/cli/common/device_dialog_check
    mode: 0755

- name: copy common/get_servers script
  copy:
    src: "../../cli/common/get_servers.sh"
    dest: /opt/cli/common/get_servers
    mode: 0755

- name: copy common/deployment_dialog script
  copy:
    src: "../../cli/common/deployment_dialog.sh"
    dest: /opt/cli/common/deployment_dialog
    mode: 0755

- name: copy common/deployment_dialog_check script
  copy:
    src: "../../cli/common/deployment_dialog_check.sh"
    dest: /opt/cli/common/deployment_dialog_check
    mode: 0755

#- name: copy common/regions_dialog_check script
#  copy:
#    src: "../../cli/common/regions_dialog_check.sh"
#    dest: /opt/cli/common/regions_dialog_check
#    mode: 0755
- name: remove common/regions_dialog_check
  ansible.builtin.file:
    path: /opt/cli/common/regions_dialog_check
    state: absent

#- name: copy common/server_dialog script
#  copy:
#    src: "../../cli/common/server_dialog.sh"
#    dest: /opt/cli/common/server_dialog
#    mode: 0755
- name: remove common/server_dialog
  ansible.builtin.file:
    path: /opt/cli/common/server_dialog
    state: absent

- name: copy common/device_list_check script
  copy:
    src: "../../cli/common/device_list_check.sh"
    dest: /opt/cli/common/device_list_check
    mode: 0755

- name: copy common/platform_dialog script
  copy:
    src: "../../cli/common/platform_dialog.sh"
    dest: /opt/cli/common/platform_dialog
    mode: 0755

- name: copy common/platform_dialog_check script
  copy:
    src: "../../cli/common/platform_dialog_check.sh"
    dest: /opt/cli/common/platform_dialog_check
    mode: 0755

#- name: copy common/device_name_dialog script
#  copy:
#    src: "../../cli/common/device_name_dialog.sh"
#    dest: /opt/cli/common/device_name_dialog
#    mode: 0755
- name: remove common/device_name_dialog
  ansible.builtin.file:
    path: /opt/cli/common/device_name_dialog
    state: absent

#- name: copy common/device_name_dialog_check script
#  copy:
#    src: "../../cli/common/device_name_dialog_check.sh"
#    dest: /opt/cli/common/device_name_dialog_check
#    mode: 0755
- name: remove common/device_name_dialog_check
  ansible.builtin.file:
    path: /opt/cli/common/device_name_dialog_check
    state: absent

- name: copy common/get_vivado_devices script
  copy:
    src: "../../cli/common/get_vivado_devices.sh"
    dest: /opt/cli/common/get_vivado_devices
    mode: 0755

- name: copy common/version_dialog script
  copy:
    src: "../../cli/common/version_dialog.sh"
    dest: /opt/cli/common/version_dialog
    mode: 0755

- name: copy common/version_dialog_check script
  copy:
    src: "../../cli/common/version_dialog_check.sh"
    dest: /opt/cli/common/version_dialog_check
    mode: 0755

#get  ----------------------------------------------------------------------------------------

#- name: copy get_from_vars
#  copy:
#    src: "../../cli/get/get_from_vars"
#    dest: /opt/cli/get/get_from_vars
#    mode: 0755
- name: remove /opt/cli/get/get_from_vars
  ansible.builtin.file:
    path: /opt/cli/get/get_from_vars
    state: absent

#- name: copy device script
#  copy:
#    src: "../../cli/get/device.sh"
#    dest: /opt/cli/get/device
#    mode: 0755
- name: remove get/device
  ansible.builtin.file:
    path: /opt/cli/get/device
    state: absent

- name: copy get/name (instead of device)
  copy:
    src: "../../cli/get/name.sh"
    dest: /opt/cli/get/name
    mode: 0755    

#- name: copy ip script
#  copy:
#    src: "../../cli/get/ip.sh"
#    dest: /opt/cli/get/ip
#    mode: 0755
- name: remove get/ip
  ansible.builtin.file:
    path: /opt/cli/get/ip
    state: absent

#- name: copy mac script
#  copy:
#    src: "../../cli/get/mac.sh"
#    dest: /opt/cli/get/mac
#    mode: 0755
- name: remove get/mac
  ansible.builtin.file:
    path: /opt/cli/get/mac
    state: absent

- name: copy serial script
  copy:
    src: "../../cli/get/serial.sh"
    dest: /opt/cli/get/serial
    mode: 0755

#- name: copy get_device_param script
#  copy:
#    src: "../../cli/get/get_device_param.sh"
#    dest: /opt/cli/get/get_device_param
#    mode: 0755
- name: remove get/get_device_param
  ansible.builtin.file:
    path: /opt/cli/get/get_device_param
    state: absent

#- name: copy get_reconfigurable_device_param script
#  copy:
#    src: "../../cli/get/get_reconfigurable_device_param.sh"
#    dest: /opt/cli/get/get_reconfigurable_device_param
#    mode: 0755
- name: remove get/get_reconfigurable_device_param
  ansible.builtin.file:
    path: /opt/cli/get/get_reconfigurable_device_param
    state: absent

- name: copy get_fpga_device_param script
  copy:
    src: "../../cli/get/get_fpga_device_param.sh"
    dest: /opt/cli/get/get_fpga_device_param
    mode: 0755

- name: copy get_gpu_device_param script
  copy:
    src: "../../cli/get/get_gpu_device_param.sh"
    dest: /opt/cli/get/get_gpu_device_param
    mode: 0755

- name: copy get/network script
  copy:
    src: "../../cli/get/network.sh"
    dest: /opt/cli/get/network
    mode: 0755

- name: copy get/bdf script
  copy:
    src: "../../cli/get/bdf.sh"
    dest: /opt/cli/get/bdf
    mode: 0755

- name: copy get/bus script
  copy:
    src: "../../cli/get/bus.sh"
    dest: /opt/cli/get/bus
    mode: 0755

- name: copy get/ifconfig script
  copy:
    src: "../../cli/get/ifconfig.sh"
    dest: /opt/cli/get/ifconfig
    mode: 0755

- name: copy get/platform script
  copy:
    src: "../../cli/get/platform.sh"
    dest: /opt/cli/get/platform
    mode: 0755

- name: copy get/workflow script
  copy:
    src: "../../cli/get/workflow.sh"
    dest: /opt/cli/get/workflow
    mode: 0755

#new ------------------------------------------------------------------------------------    

- name: copy (new) vitis script
  copy:
    src: "../../cli/new/vitis.sh"
    dest: /opt/cli/new/vitis
    mode: 0755

#- name: copy (new) vivado script
#  copy:
#    src: "../../cli/new/vivado.sh"
#    dest: /opt/cli/new/vivado
#    mode: 0755
- name: remove new vivado (until we truly implement the workflow)
  ansible.builtin.file:
    path: /opt/cli/new/vivado
    state: absent

- name: copy (new) coyote script
  copy:
    src: "../../cli/new/coyote.sh"
    dest: /opt/cli/new/coyote
    mode: 0755

- name: copy (new) mpi script
  copy:
    src: "../../cli/new/mpi.sh"
    dest: /opt/cli/new/mpi
    mode: 0755

- name: copy new/hip script
  copy:
    src: "../../cli/new/hip.sh"
    dest: /opt/cli/new/hip
    mode: 0755    

#program ------------------------------------------------------------------------------------

#- name: copy bit script
#  copy:
#    src: "../../cli/program/bit.sh"
#    dest: /opt/cli/program/bit
#    mode: 0755
- name: remove bit
  ansible.builtin.file:
    path: /opt/cli/program/bit
    state: absent

- name: copy revert script
  copy:
    src: "../../cli/program/revert.sh"
    dest: /opt/cli/program/revert
    mode: 0755

#- name: copy rescan script
#  copy:
#    src: "../../cli/program/rescan.sh"
#    dest: /opt/cli/program/rescan
#    mode: 0755
- name: remove rescan
  ansible.builtin.file:
    path: /opt/cli/program/rescan
    state: absent

- name: copy vivado script
  copy:
    src: "../../cli/program/vivado.sh"
    dest: /opt/cli/program/vivado
    mode: 0755

- name: copy flash_bitstream.tcl script
  copy:
    src: "../../cli/program/flash_bitstream.tcl"
    dest: /opt/cli/program/flash_bitstream.tcl
    mode: 0755

- name: copy flash_xrt_bitstream.tcl script
  copy:
    src: "../../cli/program/flash_xrt_bitstream.tcl"
    dest: /opt/cli/program/flash_xrt_bitstream.tcl
    mode: 0755

#- name: copy get_fpga script
#  copy:
#    src: "../../cli/program/get_fpga.sh"
#    dest: /opt/cli/program/get_fpga
#    mode: 0755
- name: remove /opt/cli/program/get_fpga
  ansible.builtin.file:
    path: /opt/cli/program/get_fpga
    state: absent

- name: copy pci_hot_plug script
  copy:
    src: "../../cli/program/pci_hot_plug.sh"
    dest: /opt/cli/program/pci_hot_plug
    mode: 0755

- name: copy fpga_chmod script
  copy:
    src: "../../cli/program/fpga_chmod.sh"
    dest: /opt/cli/program/fpga_chmod
    mode: 0755

- name: copy vitis script
  copy:
    src: "../../cli/program/vitis.sh"
    dest: /opt/cli/program/vitis
    mode: 0755

- name: copy (program) coyote script
  copy:
    src: "../../cli/program/coyote.sh"
    dest: /opt/cli/program/coyote
    mode: 0755

#- name: copy program get_N_REGIONS
#  copy:
#    src: "../../cli/program/get_N_REGIONS.sh"
#    dest: /opt/cli/program/get_N_REGIONS
#    mode: 0755
- name: remove /opt/cli/program/get_N_REGIONS
  ansible.builtin.file:
    path: /opt/cli/program/get_N_REGIONS
    state: absent

- name: copy program enable_N_REGIONS
  copy:
    src: "../../cli/program/enable_N_REGIONS.sh"
    dest: /opt/cli/program/enable_N_REGIONS
    mode: 0755

- name: copy program enable_regions
  copy:
    src: "../../cli/program/enable_regions.sh"
    dest: /opt/cli/program/enable_regions
    mode: 0755

#- name: copy program reboot
#  copy:
#    src: "../../cli/program/reboot.sh"
#    dest: /opt/cli/program/reboot
#    mode: 0755
- name: remove program/reboot
  ansible.builtin.file:
    path: /opt/cli/program/reboot
    state: absent

# reboot -------------------------------------------------------------------------------------

- name: copy reboot
  copy:
    src: "../../cli/reboot.sh"
    dest: /opt/cli/reboot
    mode: 0755    

# run ---------------------------------------------------------------------------------------

- name: copy (run) vitis script
  copy:
    src: "../../cli/run/vitis.sh"
    dest: /opt/cli/run/vitis
    mode: 0755

- name: copy (run) coyote script
  copy:
    src: "../../cli/run/coyote.sh"
    dest: /opt/cli/run/coyote
    mode: 0755

- name: copy (run) mpi script
  copy:
    src: "../../cli/run/mpi.sh"
    dest: /opt/cli/run/mpi
    mode: 0755

- name: copy run/hip script
  copy:
    src: "../../cli/run/hip.sh"
    dest: /opt/cli/run/hip
    mode: 0755

# set ---------------------------------------------------------------------------------------

#- name: copy set/write script
#  copy:
#    src: "../../cli/set/write.sh"
#    dest: /opt/cli/set/write
#    mode: 0755
- name: remove /opt/cli/set/write
  ansible.builtin.file:
    path: /opt/cli/set/write
    state: absent

- name: copy set/keys script
  copy:
    src: "../../cli/set/keys.sh"
    dest: /opt/cli/set/keys
    mode: 0755

- name: copy set/gh script
  copy:
    src: "../../cli/set/gh.sh"
    dest: /opt/cli/set/gh
    mode: 0755

#validate -----------------------------------------------------------------------------------

- name: copy iperf script
  copy:
    src: "../../cli/validate/iperf.sh"
    dest: /opt/cli/validate/iperf
    mode: 0755

#- name: copy mpich script
#  copy:
#    src: "../../cli/validate/mpich.sh"
#    dest: /opt/cli/validate/mpich
#    mode: 0755
- name: remove mpich
  ansible.builtin.file:
    path: /opt/cli/validate/mpich
    state: absent

- name: copy mpi script
  copy:
    src: "../../cli/validate/mpi.sh"
    dest: /opt/cli/validate/mpi
    mode: 0755

#- name: copy openmpi script
#  copy:
#    src: "../../cli/validate/openmpi.sh"
#    dest: /opt/cli/validate/openmpi
#    mode: 0755
- name: remove openmpi
  ansible.builtin.file:
    path: /opt/cli/validate/openmpi
    state: absent

#- name: copy hello_world_mpi script
#  copy:
#    src: "../../cli/validate/hello_world_mpi.c"
#    dest: /opt/cli/validate/hello_world_mpi.c
#    mode: 0755
- name: remove hello_world_mpi.c
  ansible.builtin.file:
    path: /opt/cli/validate/hello_world_mpi.c
    state: absent

#- name: copy mpi_hello script
#  copy:
#    src: "../../cli/validate/mpi_hello.c"
#    dest: /opt/cli/validate/mpi_hello.c
#    mode: 0755
- name: remove mpi_hello.c
  ansible.builtin.file:
    path: /opt/cli/validate/mpi_hello.c
    state: absent

- name: copy coyote script
  copy:
    src: "../../cli/validate/coyote.sh"
    dest: /opt/cli/validate/coyote
    mode: 0755

- name: remove templates/coyote/hello_world/src/host.cpp
  ansible.builtin.file:
    path: /opt/cli/templates/coyote/hello_world/src/host.cpp
    state: absent
    
- name: remove templates/coyote/hello_world/src/vadd.cpp
  ansible.builtin.file:
    path: /opt/cli/templates/coyote/hello_world/src/vadd.cpp
    state: absent

- name: copy validate/hip
  copy:
    src: "../../cli/validate/hip.sh"
    dest: /opt/cli/validate/hip
    mode: 0755

- name: copy validate/vitis
  copy:
    src: "../../cli/validate/vitis.sh"
    dest: /opt/cli/validate/vitis
    mode: 0755

#cli system-wide
- name: /opt/cli to system-wide $PATH.
  copy:
    dest: /etc/profile.d/cli.sh
    content: 'PATH=$PATH:/opt/cli'